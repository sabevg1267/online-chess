<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1400" height="900" viewBox="0 0 1400 900">
  <defs>
    <!-- Gradients -->
    <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F5F7FA;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#E9ECEF;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="frontendGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#48BB78;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#38A169;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="backendGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#4299E1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#3182CE;stop-opacity:1" />
    </linearGradient>
    
    <linearGradient id="databaseGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#ED8936;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#DD6B20;stop-opacity:1" />
    </linearGradient>

    <!-- Shadows -->
    <filter id="dropShadow" x="-50%" y="-50%" width="200%" height="200%">
      <feGaussianBlur in="SourceAlpha" stdDeviation="3"/>
      <feOffset dx="0" dy="2" result="offsetblur"/>
      <feFlood flood-color="#000000" flood-opacity="0.1"/>
      <feComposite in2="offsetblur" operator="in"/>
      <feMerge>
        <feMergeNode/>
        <feMergeNode in="SourceGraphic"/>
      </feMerge>
    </filter>

    <!-- Arrow markers -->
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#718096" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="url(#bgGradient)"/>

  <!-- Title Section -->
  <g id="title">
    <text x="50" y="60" font-family="Arial, sans-serif" font-size="32" font-weight="bold" fill="#2D3748">
      Online Chess Architecture
    </text>
    <text x="50" y="90" font-family="Arial, sans-serif" font-size="16" fill="#718096">
      Full-stack multiplayer chess application with React, Socket.io, and Supabase
    </text>
  </g>

  <!-- Frontend Section -->
  <g id="frontend" transform="translate(50, 140)">
    <!-- Main container -->
    <rect x="0" y="0" width="600" height="400" rx="20" fill="white" filter="url(#dropShadow)"/>
    <rect x="0" y="0" width="600" height="60" rx="20" fill="url(#frontendGrad)"/>
    <path d="M 0 40 L 600 40" stroke="none"/>
    <rect x="0" y="40" width="600" height="360" fill="white"/>
    <text x="20" y="40" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
      Frontend (React)
    </text>

    <!-- Components -->
    <g id="frontend-components" transform="translate(20, 80)">
      <!-- App.js -->
      <rect x="0" y="0" width="160" height="60" rx="10" fill="#E6FFFA" stroke="#38B2AC" stroke-width="2"/>
      <text x="80" y="35" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#234E52">
        App.js
      </text>

      <!-- Board.js -->
      <rect x="0" y="80" width="160" height="60" rx="10" fill="#E6FFFA" stroke="#38B2AC" stroke-width="2"/>
      <text x="80" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#234E52">
        ui/Board.js
      </text>

      <!-- Bar.js -->
      <rect x="0" y="160" width="160" height="60" rx="10" fill="#E6FFFA" stroke="#38B2AC" stroke-width="2"/>
      <text x="80" y="195" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#234E52">
        ui/Bar.js
      </text>

      <!-- Functions -->
      <rect x="200" y="0" width="180" height="140" rx="10" fill="#F0FFF4" stroke="#48BB78" stroke-width="2"/>
      <text x="290" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#22543D">
        Game Logic
      </text>
      <text x="210" y="50" font-family="Arial, sans-serif" font-size="12" fill="#2F855A">
        • setUp
      </text>
      <text x="210" y="70" font-family="Arial, sans-serif" font-size="12" fill="#2F855A">
        • dropPiece
      </text>
      <text x="210" y="90" font-family="Arial, sans-serif" font-size="12" fill="#2F855A">
        • legalMoves
      </text>
      <text x="210" y="110" font-family="Arial, sans-serif" font-size="12" fill="#2F855A">
        • check/checkmate
      </text>

      <!-- Socket.io Client -->
      <rect x="200" y="160" width="180" height="60" rx="10" fill="#EBF8FF" stroke="#4299E1" stroke-width="2"/>
      <text x="290" y="195" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2A4E7C">
        Socket.io Client
      </text>

      <!-- External Services -->
      <rect x="400" y="0" width="160" height="60" rx="10" fill="#FFFAF0" stroke="#ED8936" stroke-width="2"/>
      <text x="480" y="35" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#7C2D12">
        Supabase Client
      </text>

      <rect x="400" y="80" width="160" height="60" rx="10" fill="#FFF5F5" stroke="#FC8181" stroke-width="2"/>
      <text x="480" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#742A2A">
        Google OAuth
      </text>
    </g>
  </g>

  <!-- Backend Section -->
  <g id="backend" transform="translate(700, 140)">
    <!-- Main container -->
    <rect x="0" y="0" width="600" height="300" rx="20" fill="white" filter="url(#dropShadow)"/>
    <rect x="0" y="0" width="600" height="60" rx="20" fill="url(#backendGrad)"/>
    <path d="M 0 40 L 600 40" stroke="none"/>
    <rect x="0" y="40" width="600" height="260" fill="white"/>
    <text x="20" y="40" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
      Backend (Node.js + Express)
    </text>

    <!-- Components -->
    <g id="backend-components" transform="translate(20, 80)">
      <!-- Express Server -->
      <rect x="0" y="0" width="250" height="60" rx="10" fill="#EBF8FF" stroke="#4299E1" stroke-width="2"/>
      <text x="125" y="35" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2A4E7C">
        Express Server (CORS enabled)
      </text>

      <!-- Socket.io Server -->
      <rect x="0" y="80" width="250" height="60" rx="10" fill="#EBF8FF" stroke="#4299E1" stroke-width="2"/>
      <text x="125" y="115" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2A4E7C">
        Socket.io Server
      </text>

      <!-- Game Rooms -->
      <rect x="300" y="0" width="260" height="140" rx="10" fill="#F7FAFC" stroke="#A0AEC0" stroke-width="2"/>
      <text x="430" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#2D3748">
        In-Memory Game State
      </text>
      <text x="310" y="50" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
        • Matchmaking
      </text>
      <text x="310" y="70" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
        • Room Management
      </text>
      <text x="310" y="90" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
        • Move Broadcasting
      </text>
      <text x="310" y="110" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
        • Player Pairing
      </text>
    </g>
  </g>

  <!-- Database Section -->
  <g id="database" transform="translate(700, 480)">
    <!-- Main container -->
    <rect x="0" y="0" width="600" height="140" rx="20" fill="white" filter="url(#dropShadow)"/>
    <rect x="0" y="0" width="600" height="60" rx="20" fill="url(#databaseGrad)"/>
    <path d="M 0 40 L 600 40" stroke="none"/>
    <rect x="0" y="40" width="600" height="100" fill="white"/>
    <text x="20" y="40" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="white">
      Supabase (PostgreSQL)
    </text>

    <!-- Table info -->
    <g transform="translate(20, 60)">
      <rect x="0" y="0" width="560" height="60" rx="10" fill="#FFFAF0" stroke="#ED8936" stroke-width="2"/>
      <text x="20" y="25" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#7C2D12">
        Players Table
      </text>
      <text x="20" y="45" font-family="Arial, sans-serif" font-size="12" fill="#9C4221">
        Columns: email, username, elo, wins, losses
      </text>
    </g>
  </g>

  <!-- Connections -->
  <g id="connections">
    <!-- Frontend to Backend -->
    <path d="M 650 340 L 700 340" stroke="#718096" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="675" y="330" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#718096">
      WebSocket
    </text>

    <!-- Frontend to Database -->
    <path d="M 550 540 Q 625 550 700 550" stroke="#ED8936" stroke-width="2" marker-end="url(#arrowhead)"/>
    <text x="625" y="540" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#ED8936">
      API Calls
    </text>
  </g>

  <!-- Legend -->
  <g id="legend" transform="translate(50, 700)">
    <text x="0" y="0" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2D3748">
      Key Features:
    </text>
    <circle cx="10" cy="20" r="5" fill="#48BB78"/>
    <text x="25" y="25" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
      Client-side chess logic and validation
    </text>
    <circle cx="10" cy="45" r="5" fill="#4299E1"/>
    <text x="25" y="50" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
      Real-time multiplayer via Socket.io
    </text>
    <circle cx="10" cy="70" r="5" fill="#ED8936"/>
    <text x="25" y="75" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
      Persistent player statistics (ELO, wins/losses)
    </text>
  </g>

  <!-- Port Information -->
  <g id="ports" transform="translate(50, 820)">
    <rect x="0" y="0" width="300" height="40" rx="5" fill="#F7FAFC" stroke="#CBD5E0" stroke-width="1"/>
    <text x="10" y="25" font-family="Arial, sans-serif" font-size="12" fill="#4A5568">
      Frontend: http://localhost:3000 | Backend: http://localhost:3001
    </text>
  </g>
</svg>
